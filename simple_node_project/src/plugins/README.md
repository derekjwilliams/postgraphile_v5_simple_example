# Very Simple WKT only PostGIS plugin

I will be creating an npm package for this, this README is just a placeholder to keep notes

## Notes for creating an npm module (Thanks Gemini!)

### Create a new project

```
PostgraphilePostgisWktPlugin/
├── src/                     # TypeScript source files
│   ├── PgPostgisWktPlugin.ts
│   └── version.ts
├── dist/                    # Compiled output (JavaScript + .d.ts files) - Generated by build
├── .gitignore
├── LICENSE                  # Your chosen open-source license (e.g., MIT)
├── package.json             # NPM package manifest (Crucial!)
├── README.md                # Instructions for users
└── tsconfig.json            # TypeScript configuration for building
```

### tsconfig.json contents example

// tsconfig.json
{
"compilerOptions": {
/_ Base Options _/
"target": "ES2022", // Target modern Node.js versions
"module": "NodeNext", // Output ES Modules compatible with Node.js
"esModuleInterop": true,
"forceConsistentCasingInFileNames": true,
"strict": true,
"skipLibCheck": true,

    /* Build Options */
    "outDir": "./dist", // Output directory for compiled files
    "rootDir": "./src", // Root directory of source files
    "declaration": true, // Generate .d.ts files (VERY IMPORTANT)
    "declarationMap": true, // Optional: Generate source maps for .d.ts files
    "sourceMap": true, // Optional: Generate source maps for .js files

    /* Module Resolution */
    "moduleResolution": "NodeNext"

},
"include": ["src/**/*"], // Only compile files in the src directory
"exclude": ["node_modules", "dist"] // Don't include these in compilation
}

### package.json example

// package.json
{
"name": "postgraphile-postgis-wkt", // Choose a unique name (e.g., @your-npm-username/postgraphile-postgis-wkt)
"version": "0.1.0", // Start with an initial version (follow Semantic Versioning)
"description": "A PostGraphile v5 plugin to handle PostGIS geometry/geography types as WKT strings.",
"author": "Your Name <your.email@example.com> (https://yourwebsite.com)", // Your details
"license": "MIT", // Or your chosen license (e.g., "Apache-2.0")
"type": "module", // VERY IMPORTANT: Specifies that your package uses ES Modules
"exports": {
// Defines the entry points for consumers (ESM standard)
".": {
// When someone imports 'postgraphile-postgis-wkt'
"import": "./dist/PgPostgisWktPlugin.js", // Path to the compiled ESM JavaScript file
"types": "./dist/PgPostgisWktPlugin.d.ts" // Path to the corresponding type definition
}
},
// Fallback for older tools (often redundant with 'exports' but good practice)
"types": "./dist/PgPostgisWktPlugin.d.ts",
"files": [
// VERY IMPORTANT: List files/folders to INCLUDE when publishing
"dist", // Include the entire compiled output directory
"LICENSE",
"README.md"
],
"scripts": {
"build": "tsc", // Command to compile TypeScript using tsconfig.json
"prepublishOnly": "npm run build" // Automatically run build before publishing
},
"peerDependencies": {
// IMPORTANT: List packages the user MUST have installed
"@dataplan/pg": "^0.0.1", // Use appropriate version ranges based on your testing
"graphile-build": "^5.0.0-beta.18", // Match the versions you developed against
"postgraphile": "^5.0.0-beta.18",
"graphql": "^16.8.1" // GraphQL is usually a peer dependency
},
"devDependencies": {
// Packages needed ONLY for development/building
"@types/node": "^20.11.24", // Or your Node version
"typescript": "^5.3.3" // Or your TS version
// Add any other dev dependencies (linters, formatters, etc.)
},
"keywords": [
"postgraphile",
"graphile",
"plugin",
"postgis",
"gis",
"geometry",
"geography",
"wkt",
"crystal",
"v5"
],
"repository": {
"type": "git",
"url": "git+https://github.com/your-username/your-repo-name.git" // Link to your Git repo
},
"homepage": "https://github.com/your-username/your-repo-name#readme", // Link to repo/docs
"bugs": {
"url": "https://github.com/your-username/your-repo-name/issues" // Link to issue tracker
}
}

```
4. Write README.md:

Explain what the plugin does (handles PostGIS types as WKT).
Show installation: npm install postgraphile-postgis-wkt (or your package name).
Provide a clear usage example showing how to import it and add it to their GraphileConfig.Preset's plugins array.
Mention limitations (e.g., only WKT output/input, specific PostGIS functions used).
State the license.
5. Add LICENSE:

Go to choosealicense.com or use standard license text (e.g., MIT).
Create a LICENSE file (no extension) in the root and paste the text.
6. Add .gitignore:

Make sure to ignore node_modules/, dist/, .env, log files, editor config, etc.
7. Build and Publish:

Build: Run npm run build. This will execute tsc and create the dist folder with .js and .d.ts files.
Login to NPM: Run npm login and enter your NPM username/password/OTP.
Publish: Run npm publish.
If using a scoped package (@username/package-name), you might need npm publish --access public the first time.
```

```

```

Using the Published Package:

Another user can now:

Install it: npm install postgraphile-postgis-wkt (or your package name)
Import it in their graphile.config.ts (or .mjs):
typescript
import { PgPostgisWktPlugin } from 'postgraphile-postgis-wkt'; // Import by package name

const preset: GraphileConfig.Preset = {
extends: [/* ... */],
plugins: [
PgPostgisWktPlugin, // Add the imported plugin
// ... other plugins
],
// ... rest of preset
};

export default preset;

```

```
